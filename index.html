<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLOCARBON</title>
    <link rel="stylesheet" href="style.css?v=13">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="manifest" href="manifest.json">
</head>
<body class="bg-default">

    <div class="bg-layer"></div>
    <div class="bg-overlay"></div>

    <section id="auth-section">
        <div class="auth-box">
            <i class="fa-solid fa-earth-americas" style="font-size: 4rem; color: #FFD700; margin-bottom: 15px;"></i>
            <h1 class="brand-text">GLOCARBON</h1>
            <p>Ecosystem Economy</p>
            <div class="role-group" style="margin-top:20px;">
                <button class="role-btn active" onclick="selectRole('Farmer')">Farmer</button>
                <button class="role-btn" onclick="selectRole('Buyer')">Buyer</button>
            </div>
            <form onsubmit="handleLogin(event)">
                <input type="email" placeholder="Email" required>
                <input type="password" placeholder="Password" required>
                <button type="submit" class="btn-cta">Access Platform</button>
            </form>
        </div>
    </section>

    <div id="main-app" style="display:none;">
        
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <span class="brand-text">GLOCARBON</span>
                <button onclick="toggleSidebar()" class="sidebar-close-btn"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <nav class="side-nav">
                <a href="#" class="nav-link active" onclick="navTo('home')">
                    <i class="fa-solid fa-house"></i> <span>Home</span>
                </a>
                <a href="#" class="nav-link" onclick="navTo('learn')">
                    <i class="fa-solid fa-book-open"></i> <span>Learn & SDGs</span>
                </a>
                <a href="#" class="nav-link" onclick="navTo('scan')">
                    <i class="fa-solid fa-satellite"></i> <span>AI Scan</span>
                </a>
                <a href="#" class="nav-link" onclick="navTo('marketplace')">
                    <i class="fa-solid fa-globe"></i> <span>Marketplace</span>
                </a>
                <a href="#" class="nav-link" onclick="navTo('profile')">
                    <i class="fa-solid fa-user-shield"></i> <span>Profile</span>
                </a>
            </nav>
        </aside>

        <header class="mobile-header">
            <i class="fa-solid fa-bars" style="font-size:1.5rem; cursor:pointer;" onclick="toggleSidebar()"></i>
            <span class="brand-text">GLOCARBON</span>
            <div onclick="navTo('profile')" style="width:35px; height:35px; background:#FFD700; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">U</div>
        </header>

        <main class="content-area" id="content-area">
            
            <button class="desktop-menu-btn" onclick="toggleSidebar()">
                <i class="fa-solid fa-bars"></i> Menu
            </button>
            
            <div id="view-home" class="app-view active-view">
                
                <div class="hero-section" style="position:relative; padding:40px 20px; border-radius:24px; overflow:hidden; color:white; margin-bottom:30px; box-shadow:0 10px 30px rgba(0,0,0,0.2);">
                    
                    <div style="position:absolute; top:0; left:0; right:0; bottom:0; z-index:-1; background:url('https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=2070&auto=format&fit=crop'); background-size:cover; background-position:center; filter:brightness(0.6);"></div>
                    
                    <span style="background:rgba(255,255,255,0.2); backdrop-filter:blur(4px); padding:4px 12px; border-radius:20px; font-size:0.75rem; text-transform:uppercase; letter-spacing:1px; border:1px solid rgba(255,255,255,0.3);">
                        Global Soil Initiative
                    </span>
                    
                    <h1 style="font-size:2.2rem; line-height:1.2; margin-top:15px; text-shadow:0 2px 4px rgba(0,0,0,0.5);">
                        The World's Largest Carbon Sink isn't a Forest.
                    </h1>
                    <p style="font-size:1.1rem; opacity:0.9; margin:15px 0 25px;">
                        It's a Grassland. Unlock the value of the <strong style="color:#FFD700;">Inverted Forest</strong> beneath your feet.
                    </p>
                    
                    <div style="display:flex; gap:10px;">
                        <button class="btn-cta" onclick="navTo('scan')" style="background:#FFD700; color:#3F2E05; border:none; font-weight:800;">
                            Calculate Potential
                        </button>
                    </div>
                </div>

                <h3 style="color:#3F2E05; margin-bottom:15px;">Why Soil Carbon?</h3>
                
                <div class="card" style="padding:0; overflow:hidden; display:grid; grid-template-columns:1fr 1fr; margin-bottom:30px;">
                    <div style="padding:20px; background:#FEF2F2; border-right:1px solid #FEE2E2;">
                        <div style="font-size:2rem; margin-bottom:10px;">üå≤</div>
                        <h4 style="margin:0; color:#991B1B;">Forests</h4>
                        <ul style="padding-left:15px; font-size:0.8rem; color:#7F1D1D; margin-top:10px; line-height:1.6;">
                            <li>Vulnerable to Fire</li>
                            <li>Above Ground</li>
                            <li>20yr Maturity</li>
                        </ul>
                    </div>

                    <div style="padding:20px; background:#ECFDF5;">
                        <div style="font-size:2rem; margin-bottom:10px;">üåæ</div>
                        <h4 style="margin:0; color:#064E3B;">Grasslands</h4>
                        <ul style="padding-left:15px; font-size:0.8rem; color:#065F46; margin-top:10px; line-height:1.6;">
                            <li>Fire Resilient</li>
                            <li><strong>Stored in Soil</strong></li>
                            <li>Annual Pay</li>
                        </ul>
                    </div>
                </div>

                <h3 style="color:#3F2E05; margin: 30px 0 15px;">How You Earn</h3>
                
                <div class="card" style="padding:20px; display:flex; flex-direction:column; gap:20px;">
                    
                    <div style="display:flex; gap:15px;">
                        <div style="min-width:40px; height:40px; background:#F0FDF4; color:#10B981; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:1.2rem;">1</div>
                        <div>
                            <h4 style="margin:0; color:#064E3B;">Map Your Land</h4>
                            <p style="font-size:0.85rem; color:#4B5563; margin-top:5px;">Use the <strong>AI Scan</strong> tab to take a photo. Our satellite node verifies your GPS and vegetation health.</p>
                        </div>
                    </div>

                    <div style="display:flex; gap:15px;">
                        <div style="min-width:40px; height:40px; background:#FFFBEB; color:#D97706; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:1.2rem;">2</div>
                        <div>
                            <h4 style="margin:0; color:#064E3B;">Mint Assets</h4>
                            <p style="font-size:0.85rem; color:#4B5563; margin-top:5px;">Verified carbon is tokenized on the Polygon blockchain as an immutable asset.</p>
                        </div>
                    </div>

                    <div style="display:flex; gap:15px;">
                        <div style="min-width:40px; height:40px; background:#EFF6FF; color:#2563EB; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:1.2rem;">3</div>
                        <div>
                            <h4 style="margin:0; color:#064E3B;">Get Paid</h4>
                            <p style="font-size:0.85rem; color:#4B5563; margin-top:5px;">Buyers purchase your credits. Funds are deposited directly to your mobile wallet.</p>
                        </div>
                    </div>

                </div>

                <div style="display:flex; justify-content:space-between; align-items:end; margin-bottom:15px;">
                    <h3 style="color:#3F2E05; margin:0;">Global Impact</h3>
                    <span onclick="navTo('marketplace')" style="font-size:0.9rem; color:#D97706; font-weight:bold; cursor:pointer;">View Map -></span>
                </div>

                <div style="display:flex; gap:15px; overflow-x:auto; padding-bottom:10px; scrollbar-width:none;">
                    <div class="narrative-card" style="min-width:160px; height:180px; background-image:url('https://images.unsplash.com/photo-1516426122078-c23e76319801?q=80&w=2068&auto=format&fit=crop');">
                        <div class="narrative-content">
                            <h4>Maasai Mara</h4>
                            <p>Kenya ‚Ä¢ Savannah</p>
                        </div>
                    </div>
                    <div class="narrative-card" style="min-width:160px; height:180px; background-image:url('https://images.unsplash.com/photo-1461301214746-1e790926d323?q=80&w=2000&auto=format&fit=crop');">
                        <div class="narrative-content">
                            <h4>Great Plains</h4>
                            <p>USA ‚Ä¢ Prairie</p>
                        </div>
                    </div>
                    <div class="narrative-card" style="min-width:160px; height:180px; background-image:url('https://images.unsplash.com/photo-1621845217965-0f622416b772?q=80&w=1974&auto=format&fit=crop');">
                        <div class="narrative-content">
                            <h4>The Pampas</h4>
                            <p>Argentina ‚Ä¢ Steppe</p>
                        </div>
                    </div>
                </div>

            </div>
            
           <div id="view-learn" class="app-view">
                <div class="academy-header">
                    <h2>Soil <span style="color:#FFD700;">Intelligence</span></h2>
                    <p>The science of the Inverted Forest.</p>
                </div>
                
                <div class="learning-tabs" role="tablist" aria-label="Learning Modules">
                    <button class="tab-btn active" onclick="switchTab('academy')" role="tab" aria-selected="true">üå± Roots</button>
                    <button class="tab-btn" onclick="switchTab('science')" role="tab" aria-selected="false">üî¨ Science</button>
                    <button class="tab-btn" onclick="switchTab('sdg')" role="tab" aria-selected="false">üá∫üá≥ Impact</button>
                </div>

                <div id="tab-academy" class="learning-content active-tab" role="tabpanel">
                    
                    <div class="lesson-card">
                        <div class="lesson-text">
                            <h4>The "Inverted Forest"</h4>
                            <p><strong>Fact:</strong> 80% of a grassland's biomass is underground.</p>
                            <p>Unlike trees, which store carbon in trunks (vulnerable to fire), grasses store carbon in deep root systems. When grass is grazed, it sheds roots, depositing carbon <strong>permanently into the soil</strong>.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1598512752271-33f913a5af13?q=80&w=2070" alt="Diagram showing deep roots of native grass versus shallow crops">
                        </div>
                    </div>

                    <div class="lesson-card">
                        <div class="lesson-text">
                            <h4>Soil Organic Carbon (SOC)</h4>
                            <p>Soil holds <strong>3x more carbon</strong> than the atmosphere and all living plants combined.</p>
                            <p>By increasing SOC by just 0.4% per year, we can halt the annual increase in atmospheric CO2. This is the "4 per 1000" initiative.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1464226184884-fa280b87c399?q=80&w=2070" alt="Close up of rich, dark, carbon-heavy soil in a hand">
                        </div>
                    </div>

                </div>

                <div id="tab-science" class="learning-content" role="tabpanel">
                    
                    <div class="lesson-card">
                        <div class="lesson-text">
                            <h4>Remote Sensing (NDVI)</h4>
                            <p>We use satellites to measure <strong>NDVI (Normalized Difference Vegetation Index)</strong>.</p>
                            <p>Healthy, carbon-sequestering grass reflects near-infrared light. Our AI analyzes this light to estimate biomass without needing expensive lab tests.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1464226184884-fa280b87c399?q=80&w=2070" alt="Hand holding rich dark soil sample">
                        </div>
                    </div>

                    <div class="lesson-card">
                        <div class="lesson-text">
                            <h4>Bulk Density & Depth</h4>
                            <p>To calculate tonnage, we measure soil density.</p>
                            <p><code>Carbon (t/ha) = Depth x Density x %SOC</code></p>
                            <p>Compacted (overgrazed) soil holds less carbon. Regenerative grazing aerates soil, increasing capacity.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1581093458791-9f3c3900df4b?q=80&w=2070" alt="Scientist testing soil density in field">
                        </div>
                    </div>

                </div>

                <div id="tab-sdg" class="learning-content" role="tabpanel">
                    
                    <div class="lesson-card" style="border-left: 5px solid #56C02B;">
                        <div class="lesson-text">
                            <h4 style="color:#56C02B; border:none; padding:0;"><i class="fa-solid fa-leaf"></i> SDG 15: Life on Land</h4>
                            <p><strong>Target 15.3:</strong> Land Degradation Neutrality.</p>
                            <p>We combat desertification. By assigning value to grass, farmers stop overgrazing, allowing the "Green Shield" to return and hold the soil together against erosion.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1500382017468-9049fed747ef?q=80&w=2232" alt="Healthy green grassland ecosystem">
                        </div>
                    </div>

                    <div class="lesson-card" style="border-left: 5px solid #3F7E44;">
                        <div class="lesson-text">
                            <h4 style="color:#3F7E44; border:none; padding:0;"><i class="fa-solid fa-cloud"></i> SDG 13: Climate Action</h4>
                            <p><strong>Target 13.1:</strong> Resilience to climate hazards.</p>
                            <p>Grasslands are fire-resilient. When a forest burns, the carbon is lost instantly. When a grassland burns, the roots survive, and the carbon stays safely underground.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1466611653911-95081537e5b7?q=80&w=2070" alt="Storm clouds over a resilient landscape">
                        </div>
                    </div>

                    <div class="lesson-card" style="border-left: 5px solid #DDA63A;">
                        <div class="lesson-text">
                            <h4 style="color:#DDA63A; border:none; padding:0;"><i class="fa-solid fa-wheat-awn"></i> SDG 2: Zero Hunger</h4>
                            <p><strong>Target 2.4:</strong> Sustainable food production.</p>
                            <p>Carbon-rich soil holds more water. This means better grass for cattle and better crops for humans, directly fighting drought-induced famine.</p>
                        </div>
                        <div class="lesson-visual">
                            <img src="https://images.unsplash.com/photo-1500937386664-56d1dfef3854?q=80&w=2070" alt="Wheat field representing food security">
                        </div>
                    </div>

                </div>
            </div>

            <div id="view-scan" class="app-view">
                
                <div class="card" style="text-align:center; padding: 30px 20px;">
                    <i class="fa-solid fa-satellite" style="font-size: 3.5rem; color: #10B981; margin-bottom: 15px;"></i>
                    <h2 style="color:#064E3B;">AI Verification</h2>
                    <p style="color:#6B7280; font-size:0.9rem;">Upload drone/satellite imagery for biomass analysis.</p>
                    
                    <div class="upload-zone" onclick="document.getElementById('file-input').click()" style="margin-top:20px;">
                        <i class="fa-solid fa-cloud-arrow-up" style="font-size: 2rem; color: #10B981;"></i>
                        <p style="margin-top:10px; color:#064E3B; font-weight:600;">Tap to Upload Image</p>
                        <p style="font-size:0.8rem; color:#9CA3AF;">Supports .JPG, .PNG, .TIFF</p>
                    </div>

                    <input type="file" id="file-input" hidden accept="image/*" onchange="startScanProcess(this)">
                </div>

                <div id="scan-progress" class="card" style="display:none; text-align:center;">
                    <div class="spinner"></div>
                    <h4 id="scan-step" style="color:#064E3B; margin-top:15px;">Initializing...</h4>
                    <div class="progress-bar-bg">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                </div>

                <div id="scan-result" class="card" style="display:none; border-top: 5px solid #10B981;">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                        <h3 style="color:#064E3B;">Analysis Complete</h3>
                        <span style="background:#ECFDF5; color:#10B981; padding:5px 10px; border-radius:20px; font-size:0.8rem; font-weight:bold;">Verified</span>
                    </div>
                    
                    <img id="preview-img" src="" style="width:100%; height:150px; object-fit:cover; border-radius:8px; margin-bottom:15px;">

                    <div class="market-stat-grid">
                        <div class="market-stat">
                            <strong>High</strong>
                            <span>Density</span>
                        </div>
                        <div class="market-stat">
                            <strong>12.4t</strong>
                            <span>Est. CO2</span>
                        </div>
                        <div class="market-stat">
                            <strong>$340</strong>
                            <span>Value</span>
                        </div>
                    </div>

                    <button class="btn-cta" onclick="navTo('marketplace')" style="margin-top:15px;">Mint as Credits</button>
                    <button onclick="resetScan()" style="width:100%; padding:10px; border:none; background:none; color:#6B7280; margin-top:5px;">Scan Again</button>
                </div>

            </div>

            <div id="view-history" class="app-view">
                <div class="academy-header" style="text-align:left; margin-bottom:20px;">
                    <button onclick="navTo('profile')" style="background:none; border:none; color:#6B7280; margin-bottom:10px;">
                        <i class="fa-solid fa-arrow-left"></i> Back
                    </button>
                    <h2>Scan <span style="color:#10B981;">Ledger</span></h2>
                    <p style="color:#BBF7D0;">Your verified measurement history.</p>
                </div>

                <div id="history-list">
                    <div class="card" style="text-align:center; padding:40px;">
                        <i class="fa-solid fa-folder-open" style="font-size:3rem; color:#E5E7EB; margin-bottom:15px;"></i>
                        <p style="color:#6B7280;">No records found yet.</p>
                        <button class="btn-cta" style="margin-top:15px; width:auto;" onclick="navTo('scan')">Start New Scan</button>
                    </div>
                </div>
            </div>

            <div id="view-contracts" class="app-view">
                <div class="academy-header" style="text-align:left; margin-bottom:20px;">
                    <button onclick="navTo('profile')" style="background:none; border:none; color:#6B7280; margin-bottom:10px;">
                        <i class="fa-solid fa-arrow-left"></i> Back
                    </button>
                    <h2>Asset <span style="color:#F59E0B;">Ledger</span></h2>
                    <p style="color:#BBF7D0;">Immutable blockchain records.</p>
                </div>

                <div class="card" style="background:linear-gradient(135deg, #1E293B, #0F172A); color:white; margin-bottom:25px; border:1px solid #334155;">
                    <div style="display:flex; justify-content:space-between; align-items:start;">
                        <div>
                            <small style="color:#94A3B8; text-transform:uppercase; letter-spacing:1px;">Wallet Address (Polygon)</small>
                            <div style="font-family:monospace; margin-top:5px; color:#F59E0B; font-size:1.1rem;">
                                0x71C...9A2F <i class="fa-regular fa-copy" style="font-size:0.8rem; color:#64748B; margin-left:5px; cursor:pointer;"></i>
                            </div>
                        </div>
                        <i class="fa-brands fa-ethereum" style="font-size:2rem; color:#334155;"></i>
                    </div>
                    <div style="margin-top:20px; display:flex; gap:20px;">
                        <div>
                            <small style="color:#94A3B8;">Token Standard</small>
                            <div style="font-weight:bold;">ERC-1155</div>
                        </div>
                        <div>
                            <small style="color:#94A3B8;">Network Status</small>
                            <div style="color:#10B981; font-weight:bold;">‚óè Synced</div>
                        </div>
                    </div>
                </div>

                <h4 style="color:#064E3B; margin-bottom:15px;">Minted Assets</h4>

                <div class="contract-card">
                    <div class="contract-icon"><i class="fa-solid fa-cube"></i></div>
                    <div style="flex:1;">
                        <h4 style="margin:0; color:#064E3B;">Carbon Tonne #4092</h4>
                        <small style="color:#6B7280;">Vintage 2024 ‚Ä¢ Plot A4</small>
                        <div class="hash-id">Hash: 0x82m...99Lq</div>
                    </div>
                    <div style="text-align:right;">
                        <span class="status-badge">Minted</span>
                        <div style="font-size:0.8rem; color:#6B7280; margin-top:5px;">Block #192440</div>
                    </div>
                </div>

                <div class="contract-card">
                    <div class="contract-icon"><i class="fa-solid fa-cube"></i></div>
                    <div style="flex:1;">
                        <h4 style="margin:0; color:#064E3B;">Carbon Tonne #4091</h4>
                        <small style="color:#6B7280;">Vintage 2024 ‚Ä¢ Plot A4</small>
                        <div class="hash-id">Hash: 0x33b...11Xy</div>
                    </div>
                    <div style="text-align:right;">
                        <span class="status-badge">Minted</span>
                        <div style="font-size:0.8rem; color:#6B7280; margin-top:5px;">Block #192439</div>
                    </div>
                </div>

                <div class="contract-card" style="opacity:0.7;">
                    <div class="contract-icon" style="background:#F3F4F6; color:#9CA3AF;"><i class="fa-solid fa-clock"></i></div>
                    <div style="flex:1;">
                        <h4 style="margin:0; color:#4B5563;">Batch Verification</h4>
                        <small style="color:#6B7280;">Pending Audit...</small>
                    </div>
                    <div style="text-align:right;">
                        <span class="status-badge" style="background:#FEF3C7; color:#D97706;">Processing</span>
                    </div>
                </div>

            </div>

            <div id="view-marketplace" class="app-view">
                <div class="academy-header" style="text-align:left; margin-bottom:20px;">
                    <h2>Global <span style="color:#FFD700;">Registry</span></h2>
                    <p style="color:#BBF7D0;">Verified projects available for retirement.</p>
                </div>
                
                <div class="card" style="padding:0; overflow:hidden; height:250px; margin-bottom:20px; border-radius:12px;">
                    <div id="map" style="width:100%; height:100%; z-index: 1;"></div>
                </div>

                <div class="lesson-card">
                    <div class="lesson-text">
                        <h4>Amazon Bio-Corridor</h4>
                        <p style="margin-bottom:5px;"><strong>Type:</strong> Reforestation (ARR)</p>
                        <p style="margin-bottom:5px;"><strong>Vintage:</strong> 2023</p>
                        <button class="btn-cta" style="margin-top:10px; width:auto; padding:8px 20px;">View Project</button>
                    </div>
                    <div class="lesson-visual" style="height:120px;">
                        <img src="https://images.unsplash.com/photo-1542273917363-3b1817f69a2d?q=80&w=2074" alt="Amazon Forest">
                    </div>
                </div>

                <div class="lesson-card">
                    <div class="lesson-text">
                        <h4>Kenya Blue Soil</h4>
                        <p style="margin-bottom:5px;"><strong>Type:</strong> Soil Sequestration</p>
                        <p style="margin-bottom:5px;"><strong>Vintage:</strong> 2024</p>
                        <button class="btn-cta" style="margin-top:10px; width:auto; padding:8px 20px;">View Project</button>
                    </div>
                    <div class="lesson-visual" style="height:120px;">
                        <img src="https://images.unsplash.com/photo-1523544545175-92e04b96d26b?q=80&w=2070" alt="Kenyan Soil Landscape">
                    </div>
                </div>
            </div>

            <div id="view-profile" class="app-view">
                
                <div style="display:flex; align-items:center; gap:15px;">
                        
                        <div id="profile-avatar" onclick="document.getElementById('profile-upload').click()" 
                             style="width:60px; height:60px; background:linear-gradient(135deg, #FFD700, #F59E0B); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-size:1.5rem; font-weight:bold; box-shadow:0 4px 10px rgba(245, 158, 11, 0.3); cursor:pointer; overflow:hidden;">
                            <span id="avatar-initials">JD</span>
                            <img id="avatar-img" src="" style="width:100%; height:100%; object-fit:cover; display:none;">
                        </div>

                        <input type="file" id="profile-upload" hidden accept="image/*" onchange="uploadProfilePic(this)">

                        <div>
                            <h3 id="user-name" style="color:#064E3B; margin:0;">John Doe</h3>
                            <span style="font-size:0.85rem; color:#10B981; background:#ECFDF5; padding:2px 8px; border-radius:12px;">Verified Steward</span>
                        </div>
                    </div>

                <div style="display:flex; gap:15px; overflow-x:auto; padding-bottom:10px; margin-bottom:20px; scrollbar-width:none;">
                    
                    <div class="stat-card" style="background:linear-gradient(135deg, #064E3B, #047857);">
                        <div class="stat-icon"><i class="fa-solid fa-wallet"></i></div>
                        <div>
                            <small style="color:#A7F3D0;">Total Earnings</small>
                            <h2 style="color:white; margin:5px 0;">$4,250</h2>
                            <small style="color:#D1FAE5;">+12% this month</small>
                        </div>
                    </div>

                    <div class="stat-card" style="background:white; border:1px solid #BBF7D0;">
                        <div class="stat-icon" style="background:#ECFDF5; color:#10B981;"><i class="fa-solid fa-tree"></i></div>
                        <div>
                            <small style="color:#6B7280;">Carbon Locked</small>
                            <h2 style="color:#064E3B; margin:5px 0;">128t</h2>
                            <small style="color:#10B981;">~ 450 Trees</small>
                        </div>
                    </div>

                </div>

                <div class="card" style="padding:0; overflow:hidden;">
                    <div class="menu-item" onclick="navTo('contracts')">
                        <i class="fa-solid fa-file-contract" style="color:#F59E0B;"></i>
                        <span>Smart Contracts</span>
                        <i class="fa-solid fa-chevron-right arrow"></i>
                    </div>
                    <div class="menu-item" onclick="navTo('history')">
                        <i class="fa-solid fa-satellite" style="color:#3B82F6;"></i>
                        <span>Scan History</span>
                        <i class="fa-solid fa-chevron-right arrow"></i>
                    </div>
                    <div class="menu-item" style="border-bottom:none;">
                        <i class="fa-solid fa-gear" style="color:#6B7280;"></i>
                        <span>Settings</span>
                        <i class="fa-solid fa-chevron-right arrow"></i>
                    </div>
                </div>

                <h4 style="color:#064E3B; margin:20px 0 10px;">Recent Activity</h4>
                <div class="card">
                    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:15px;">
                        <div style="display:flex; gap:15px; align-items:center;">
                            <div style="background:#ECFDF5; padding:10px; border-radius:8px; color:#10B981;"><i class="fa-solid fa-check"></i></div>
                            <div>
                                <h5 style="margin:0; color:#064E3B;">Plot A4 Verification</h5>
                                <small style="color:#6B7280;">2 hours ago</small>
                            </div>
                        </div>
                        <span style="color:#10B981; font-weight:bold;">+ 12 Credits</span>
                    </div>
                    
                    <div style="display:flex; align-items:center; justify-content:space-between;">
                        <div style="display:flex; gap:15px; align-items:center;">
                            <div style="background:#FFFBEB; padding:10px; border-radius:8px; color:#F59E0B;"><i class="fa-solid fa-arrow-up"></i></div>
                            <div>
                                <h5 style="margin:0; color:#064E3B;">Marketplace Sale</h5>
                                <small style="color:#6B7280;">1 day ago</small>
                            </div>
                        </div>
                        <span style="color:#064E3B; font-weight:bold;">+ $340.00</span>
                    </div>
                </div>

                <button class="btn-cta" 
                        onclick="handleLogout()" 
                        aria-label="Log out of your account"
                         style="background:#EF4444; color:white; margin-top:30px; display:flex; align-items:center; justify-content:center; gap:10px;">
                    <i class="fa-solid fa-right-from-bracket"></i> Secure Log Out
                </button>

            </div>

        </main>

    </div>

        <nav class="mobile-bottom-nav">
            <button onclick="navTo('home')" class="nav-item active">
                <div class="nav-icon-container">
                    <i class="fa-solid fa-house"></i>
                </div>
            </button>
            
            <button onclick="navTo('learn')" class="nav-item">
                <div class="nav-icon-container">
                    <i class="fa-solid fa-layer-group"></i> </div>
            </button>
            
            <div class="fab-container">
                <button onclick="navTo('scan')" class="fab-btn" aria-label="Add Scan or Project">
                    <i class="fa-solid fa-plus"></i> </button>
            </div>
            
            <button onclick="navTo('marketplace')" class="nav-item">
                <div class="nav-icon-container">
                    <i class="fa-solid fa-earth-americas"></i> </div>
            </button>
            
            <button onclick="navTo('profile')" class="nav-item">
                <div class="nav-icon-container">
                    <i class="fa-solid fa-user"></i> </div>
            </button>
        </nav>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="script.js?v=13"></script>
    <script>
        // Force Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => { navigator.serviceWorker.register('/sw.js'); });
        }
    </script>
</body>
</html>